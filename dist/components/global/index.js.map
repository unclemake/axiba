{"version":3,"sources":["components/global/index.js","components/global/index.tsx"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","React","require","ReactDOM","react_router_1","index_1","Main","_classCallCheck","this","_this","_possibleConstructorReturn","__proto__","getPrototypeOf","apply","state","loading","page","createElement","asyncRender","_this2","props","url","route","path","location","pathname","window","__md5Array","md5obj","find","value","md5","console","log","setState","setTimeout","async","mod","Com","default","status","nextProps","oldLocation","search","asyncLoading","className","getLoadingClass","Component","AppRouter","text","obj","callback","prop","Router","history","hashHistory","Redirect","from","to","Route","component","defineProperty","exports","render","document","getElementById"],"mappings":"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","file":"index.js","sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nconst React = require('react');\nconst ReactDOM = require('react-dom');\nconst react_router_1 = require('react-router');\nconst index_1 = require('../nav/index');\nclass Main extends React.Component {\n    constructor() {\n        super(...arguments);\n        this.state = {\n            loading: 0,\n            page: React.createElement(\"div\", null)\n        };\n        this.asyncRender = false;\n    }\n    asyncLoading() {\n        this.asyncRender = false;\n        let props = this.props;\n        // 自动解析\n        let url = props.route.path === '*' ?\n            'pages' + props.location.pathname + '/index.js' : 'pages/' + props.route.path + '/index.js';\n        if (window.__md5Array) {\n            let md5obj = __md5Array.find(value => value.path === url);\n            if (md5obj) {\n                url = md5obj.md5;\n            }\n        }\n        console.log('加载：' + url);\n        this.state.loading = 0;\n        this.setState(this.state);\n        setTimeout(() => {\n            this.state.loading = 1;\n            this.setState(this.state);\n        }, 0);\n        require.async(url, (mod) => {\n            this.state.loading = 2;\n            if (mod) {\n                let Com = mod.default;\n                this.state.page = React.createElement(Com, null);\n                this.setState(this.state);\n            }\n            else {\n                require.async('../../pages/error/index.js', (mod) => {\n                    let Com = mod.default;\n                    this.state.page = React.createElement(Com, {status: 404});\n                    this.setState(this.state);\n                });\n            }\n        });\n    }\n    componentWillReceiveProps(nextProps) {\n        let oldLocation = this.props.location;\n        let location = nextProps.location;\n        if (oldLocation.pathname != location.pathname || oldLocation.search != location.search) {\n            this.asyncRender = true;\n        }\n    }\n    componentDidUpdate() {\n        if (this.asyncRender) {\n            this.asyncLoading();\n        }\n    }\n    componentDidMount() {\n        this.asyncLoading();\n    }\n    getLoadingClass() {\n        switch (this.state.loading) {\n            case 0:\n                return '';\n            case 1:\n                return 'loading-box-loading';\n            case 2:\n                return 'loading-box-complete';\n        }\n    }\n    render() {\n        return React.createElement(\"div\", {className: 'h100'}, \n            React.createElement(index_1.default, null), \n            React.createElement(\"div\", {className: \"loading-box \" + this.getLoadingClass()}, \n                React.createElement(\"div\", {className: \"loading-box-inner\"})\n            ), \n            React.createElement(\"main\", null, this.state.page));\n    }\n}\nclass AppRouter extends React.Component {\n    async(text) {\n        return (obj, callback) => {\n            callback(null, (prop) => {\n                return React.createElement(Main, __assign({}, prop));\n            });\n        };\n    }\n    render() {\n        return (React.createElement(\"section\", {className: 'h100'}, \n            React.createElement(react_router_1.Router, {history: react_router_1.hashHistory}, \n                React.createElement(react_router_1.Redirect, {from: '/', to: '/react'}), \n                React.createElement(react_router_1.Route, {path: 'dang', component: Main}), \n                React.createElement(react_router_1.Route, {path: '*', component: Main}))\n        ));\n    }\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = AppRouter;\nReactDOM.render(React.createElement(AppRouter, null), document.getElementById('app'));",null],"sourceRoot":"/assets"}