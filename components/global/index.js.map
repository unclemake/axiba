{"version":3,"sources":["components/global/index.tsx"],"names":[],"mappings":"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","file":"../../assets/components/global/index.js","sourcesContent":["import * as React from 'react';\r\nimport * as ReactDOM from 'react-dom';\r\nimport { Router, Route, Redirect, hashHistory } from 'react-router';\r\nimport Nav from '../nav/index';\r\nimport Progress from '../progress/index';\r\n\r\ndeclare let require: any;\r\n\r\n\r\n\r\nclass Main extends React.Component<ReactRouter.RouteComponentProps<void, void>, any> {\r\n\r\n    state = {\r\n        loading: true,\r\n        page: <div></div>\r\n    }\r\n\r\n    asyncLoading() {\r\n        let props = this.props;\r\n        // 自动解析\r\n        let url = props.route.path === '*' ? '../../pages' + props.location.pathname + '/index' : '../' + props.route.path;\r\n        console.log('加载：' + url);\r\n        require.async(url, (mod) => {\r\n            if (mod) {\r\n                let Com = mod.default;\r\n                this.state.page = <Com />\r\n                this.setState(this.state);\r\n            } else {\r\n                require.async('../../pages/error/index.js', (mod) => {\r\n                    let Com = mod.default;\r\n                    this.state.page = <Com />;\r\n                    this.setState(this.state);\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        let oldLocation = this.props.location;\r\n        let location = nextProps.location;\r\n        \r\n        if (oldLocation.pathname != location.pathname || oldLocation.search !=  location.search) {\r\n            this.asyncLoading();\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.asyncLoading();\r\n    }\r\n\r\n    render() {\r\n        return <div className='h100'>\r\n            <Nav></Nav>\r\n            <div className=\"page-loading-box\">\r\n            </div>\r\n            <main>\r\n                {this.state.page}\r\n            </main>\r\n        </div>;\r\n    }\r\n}\r\n\r\n\r\n\r\nexport default class AppRouter extends React.Component<any, any> {\r\n\r\n    async(text) {\r\n        return (obj, callback) => {\r\n            callback(null, (prop) => {\r\n                return <Main {...prop} ></Main>;\r\n            })\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <section className='h100'>\r\n                <Router history={hashHistory}>\r\n                    <Redirect from='/' to='/react' />\r\n                    <Route path='*' component={Main} />\r\n                </Router>\r\n            </section>\r\n        )\r\n    }\r\n}\r\n\r\nReactDOM.render(\r\n    <AppRouter />,\r\n    document.getElementById('app')\r\n);\r\n"]}