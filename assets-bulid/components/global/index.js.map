{"version":3,"sources":["components/global/index.js","components/global/index.tsx"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","React","require","ReactDOM","react_router_1","index_1","Main","state","loading","page","createElement","asyncRender","props","url","route","path","location","pathname","console","log","setState","setTimeout","async","mod","Com","default","status","nextProps","oldLocation","search","asyncLoading","className","getLoadingClass","Component","AppRouter","text","obj","callback","prop","Router","history","hashHistory","Redirect","from","to","Route","component","defineProperty","exports","value","render","document","getElementById"],"mappings":"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","file":"components/global/index.js","sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nconst React = require('react');\nconst ReactDOM = require('react-dom');\nconst react_router_1 = require('react-router');\nconst index_1 = require('../nav/index');\nclass Main extends React.Component {\n    constructor() {\n        super(...arguments);\n        this.state = {\n            loading: 0,\n            page: React.createElement(\"div\", null)\n        };\n        this.asyncRender = false;\n    }\n    asyncLoading() {\n        this.asyncRender = false;\n        let props = this.props;\n        // 自动解析\n        let url = props.route.path === '*' ? '../../pages' + props.location.pathname + '/index' : '../' + props.route.path;\n        console.log('加载：' + url);\n        this.state.loading = 0;\n        this.setState(this.state);\n        setTimeout(() => {\n            this.state.loading = 1;\n            this.setState(this.state);\n        }, 0);\n        require.async(url, (mod) => {\n            this.state.loading = 2;\n            if (mod) {\n                let Com = mod.default;\n                this.state.page = React.createElement(Com, null);\n                this.setState(this.state);\n            }\n            else {\n                require.async('../../pages/error/index.js', (mod) => {\n                    let Com = mod.default;\n                    this.state.page = React.createElement(Com, {status: 404});\n                    this.setState(this.state);\n                });\n            }\n        });\n    }\n    componentWillReceiveProps(nextProps) {\n        let oldLocation = this.props.location;\n        let location = nextProps.location;\n        if (oldLocation.pathname != location.pathname || oldLocation.search != location.search) {\n            this.asyncRender = true;\n        }\n    }\n    componentDidUpdate() {\n        if (this.asyncRender) {\n            this.asyncLoading();\n        }\n    }\n    componentDidMount() {\n        this.asyncLoading();\n    }\n    getLoadingClass() {\n        switch (this.state.loading) {\n            case 0:\n                return '';\n            case 1:\n                return 'loading-box-loading';\n            case 2:\n                return 'loading-box-complete';\n        }\n    }\n    render() {\n        return React.createElement(\"div\", {className: 'h100'}, \n            React.createElement(index_1.default, null), \n            React.createElement(\"div\", {className: \"loading-box \" + this.getLoadingClass()}, \n                React.createElement(\"div\", {className: \"loading-box-inner\"})\n            ), \n            React.createElement(\"main\", null, this.state.page));\n    }\n}\nclass AppRouter extends React.Component {\n    async(text) {\n        return (obj, callback) => {\n            callback(null, (prop) => {\n                return React.createElement(Main, __assign({}, prop));\n            });\n        };\n    }\n    render() {\n        return (React.createElement(\"section\", {className: 'h100'}, \n            React.createElement(react_router_1.Router, {history: react_router_1.hashHistory}, \n                React.createElement(react_router_1.Redirect, {from: '/', to: '/react'}), \n                React.createElement(react_router_1.Route, {path: '*', component: Main}))\n        ));\n    }\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = AppRouter;\nReactDOM.render(React.createElement(AppRouter, null), document.getElementById('app'));",null],"sourceRoot":"/assets"}